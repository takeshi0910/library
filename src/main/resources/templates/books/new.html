<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>📘 本の新規登録 | 図書館アプリ</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">
	<div class="container mt-4">

		<h1 class="mb-4">📘 本の新規登録</h1>

		<form th:action="@{/books}" th:object="${book}" method="post" class="bg-white p-4 rounded shadow-sm" novalidate>
			<div th:if="${#fields.hasGlobalErrors()}">
				<div class="alert alert-danger" th:each="err : ${#fields.globalErrors()}" th:text="${err}"></div>
			</div>
			<div class="mb-3">
				<label class="form-label">書名</label>
				<input type="text" th:field="*{title}"
					   th:classappend="${#fields.hasErrors('title')}? 'is-invalid'"
					   class="form-control">
				<div class="text-danger" th:if="${#fields.hasErrors('title')}" th:errors="*{title}"></div>
			</div>

			<div class="mb-3">
				<label class="form-label">著者</label>
				<input type="text" th:field="*{author}"
					   th:classappend="${#fields.hasErrors('author')}? 'is-invalid'"
					   class="form-control">
				<div class="text-danger" th:if="${#fields.hasErrors('author')}" th:errors="*{author}"></div>
			</div>

			<div class="mb-3">
				<label class="form-label">ジャンル</label>
				<select th:field="*{genre}"
						th:classappend="${#fields.hasErrors('genre')}? 'is-invalid'"
						class="form-select">

					<option th:if="${#fields.hasErrors('genre')}" value="" disabled selected>ジャンルを選択</option>
					<option th:each="g : ${genres}" th:value="${g}" th:text="${g}"></option>
				</select>
				<div class="text-danger" th:if="${#fields.hasErrors('genre')}" th:errors="*{genre}"></div>
			</div>

			<div class="mb-3">
				<label class="form-label">ISBN</label>
				<input type="text" th:field="*{isbn}"
					   th:classappend="${#fields.hasErrors('isbn')}? 'is-invalid'"
					   class="form-control">
				<div class="text-danger" th:if="${#fields.hasErrors('isbn')}" th:errors="*{isbn}"></div>
			</div>

			<div class="d-flex justify-content-between">
				<a th:href="@{/books}" class="btn btn-secondary">⬅ 戻る</a>
				<button type="submit" class="btn btn-primary">📥 登録する</button>
			</div>
		</form>

	</div>
</body>

</html>